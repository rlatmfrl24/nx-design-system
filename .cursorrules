# Project Context
This is a Design System project named "My Design System".
- **Framework**: Next.js 16 (App Router)
- **Language**: TypeScript
- **Package Manager**: npm (package-lock.json)
- **UI Library**: MUI (Material UI) v7 with Emotion
- **Documentation**: Storybook v10 (nextjs-vite)
- **Testing**: Playwright + Vitest
- **Design Source**: Figma (Data provided via MCP or JSON)

# Code Style & Conventions

## 1. Component Structure
- All components must be functional components using named exports.
- Component files live in `app/components` with the pattern `[name].component.tsx`.
- Stories live in `stories` with the pattern `[name].stories.tsx` (or `.stories.ts`).

## 2. MUI & Styling
- Use `styled()` from `@mui/material/styles` for reusable styled components.
- Avoid inline `sx` prop for complex styles; use `styled` components to keep JSX clean.
- ALWAYS use theme tokens (e.g., `theme.palette.primary.main`, `theme.spacing(2)`) instead of hardcoded values (hex codes, pixels).
- When converting Figma data:
  - Map Figma "Auto Layout" -> MUI `Stack` or `Box` with `display="flex"`.
  - Map Figma "Frame" -> `Box` or `Paper`.
  - Map Figma "Text" -> `Typography`.

## 3. Storybook
- Every new component MUST have a corresponding `.stories.tsx` (or `.stories.ts`) file in `stories`.
- Use TypeScript for Storybook configuration (`Meta`, `StoryObj`) from `@storybook/nextjs-vite`.
- Define `argTypes` explicitly for key props.

## 4. Testing (Playwright + Vitest)
- Prioritize testing for accessibility (A11y) and visual regression.
- Use `page.goto` to visit specific Storybook iframe URLs for visual testing.
- URL Pattern: `/iframe.html?id=[component-id]&viewMode=story`
- Use `expect(page).toHaveScreenshot()` for visual comparisons.

## 5. TypeScript
- Use `interface` for props definitions usually named `[Component Name]Props`.
- Avoid `any`; use `unknown` if type is truly ambiguous, but prefer specific types.

# Workflow Instructions for AI

- **Generating from Figma**: When I provide Figma JSON or MCP data(Do not use chrome-devtools to analyze the structure), analyze the structure first. Identify layouts (Row/Column), Padding, and Colors. Then match them to MUI Components.
- **Next.js Integration**: Add `'use client'` only when components use hooks, state, refs, or event handlers that require client components.
- **Dependencies**: Use `pnpm install` for new dependencies. Prefer `pnpm install <pkg>` or `pnpm install -D <pkg>`.